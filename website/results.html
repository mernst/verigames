<html>
	<head>
		<link type="text/css" href="./jqueryUI/css/redmond/jquery-ui-1.8.18.custom.css" rel="Stylesheet" />	
		<link type="text/css" href="./styles/results.css" rel="Stylesheet"/>
		<script type="text/javascript" src="./jqueryUI/js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="./jqueryUI/js/jquery-ui-1.8.18.custom.min.js"></script>
		<script type="text/javascript" src="./scripts/spin.js"></script>
	</head>
	<body>
		<script>
		
			(function( $ ){
				//plugin buttonset vertical
				$.fn.buttonsetv = function() {
				  $(':radio, :checkbox', this).wrap('<div style="margin: 1px"/>');
				  $(this).buttonset();
				 
				  $('label:first', this).removeClass('ui-corner-left').addClass('ui-corner-top');
				  $('label:last', this).removeClass('ui-corner-right').addClass('ui-corner-bottom');
				  
				  var max_width = 0; 
				  
				  $('label', this).each(function(index){
				     var w = $(this).width();
				     if (w > max_width){
				     	 max_width = w; 
				     }
				  })
				  
				  $('label', this).each(function(index){
				    $(this).width(max_width);
				  })
				};
			})( jQuery );

  			function radioClicks() {
  				var queryString = ((location.search.substr(1)).split("?"));
     			var file_path = $(this).attr('id');
     			var id = "path=" + queryString[0].substring(3) +  "/" + file_path;
     			$("#text_area").html("Retrieving Contents").load("./scripts/retrieve_file_contents.php", id);
     			$("#download_button").bind("click", 
     				function(){
     					window.open(file_path.substring(1), 'Download');
     				}
     			);
			};
			
			function successAjax(){
				$( "#radio" ).buttonsetv();
				$( "input[name='radio']" ).bind( "click", radioClicks );
					
		 	};
		 	
		 	$( document ).ready( function() { 
		 		var queryString = ((location.search.substr(1)).split("?"));
		 		$("#radio").html(function(){
						var opts = {
				  		lines: 12, // The number of lines to draw
				 		length: 7, // The length of each line
				  		width: 2, // The line thickness
				  		radius: 6, // The radius of the inner circle
				  		color: '#2659E5', // #rgb or #rrggbb
				  		speed: 2, // Rounds per second
				  		trail: 60, // Afterglow percentage
				  		shadow: false, // Whether to render a shadow
				  		hwaccel: false // Whether to use hardware acceleration
					};
					var target = document.getElementById('message');
					var spinner = new Spinner(opts).spin(target);
					
					var message = document.createElement("div");
					message.id = "message";
					message.innerHTML = "Retrieving Files, Please Wait...";
					$("#radio").append(message);
		 		}).load("./scripts/annotate.php", queryString[0], successAjax);
     		 

 		 	});

		</script>
		<div id="top">
		</div>
		<div id="content">
			<div id="results">
				<form>
					<div id="radio">
					
					</div>
				</form>
			</div>
			<div id="code_view">
				<div id="header">
					<div id="download">
						<button id="download_button">Download</button>
					</div>
					<div id="file_name">
						Annotated Code
					</div>
				</div>
				<div id="code">
					<textarea id="text_area" rows="" cols="" readonly="true">
					</textarea>
				</div>
			</div>
		</div>
	</body>
</html>
		