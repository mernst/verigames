
--------------------------------
Site Location:

The current location of the site is on the abstract.cs.washington.edu server under the path /homes/abstract/bdwalker/www

The permissions group is set to the verigames group with read, write and execute permissions.  The user permissions allow only for read and execute. 

--------------------------------

Site Structure:

The root contains several files as well as directories.  The files and their descriptions are as follows:

index.php:  This is the homepage and currently provides the user with a way to upload their files.  

results.html: This site is where the user will be redirected after completing a game.  Here they can see the marked up code they uploaded with the results from the game. 

removeAll.php: A script to remove all the contents of the upload folder. See Misc. below. 


There are also eight main folders in the root directory.  They are as follows:

flash_files:  Stores all the flash related content for the site, including the webgame.swf file which is the game flash file. 

scripts: Holds all the main Javascript and PHP scripts used by the site. 

samples:  Holds any sample .xml files that allow a user to play a game without uploading their own content. 

styles: Holds all the .css stylesheets for the site.  The name of the css stylesheet should correpsond directly with the page they define the style for. 

uploads:  This folder stores any files uploaded by a user of the site.  The folder will contain subfolder with unique guid's.  In each folder all of the file the user uploaded and any of the output produced by the parsers and the world.xml will be located. Any error text will also be located in this folder. 

JQueryUI: This is a folder that stores the JQuery framework.  JQuery is a downloadable Javascript framework that can be downloaded from www.jquery.com

java: Stores all the java code required for the site.  

resources: Stores all the media files for the site design. (background images, button images, logos, etc.)
--------------------------------

Updating:

To update the main webgame.swf all that is needed is to replace the file located in flash_files in the root directory. As long as the interface with webgame.html hasn't changed then no further changes are required. However, if webgame.html, the page that references webgame.swf, needs to be modified then please let me know and I'll make the necessary changes. 

The other most common file that will likely need to be updated on a regular basis is verigames.jar.  This file is located in the java file in the root directory.  Currently, only Werner Dietl has permissions to change this file. 


--------------------------------

Misc.

removeAll.php:
There is a script file entitle removeAll.php in the root directory of the site.  If you browse to this page in a browser it will remove all the folder in the uploads folder.  This is used as a quick way to clean out the uploads folder during testing.  This will remove ALL folders in the uploads directory. Make sure that if you use this script that you really want to clear the contents.  This will obviously be removed before the site goes live, but it is nice to have in the meantime.


--------------------------------

Website Setup Instructions For Linux:


Step 1: Download Dependencies:

Required Dependencies:

- GraphViz must be installed
- JDK 7
- Scala
- Flash
- GraphViz

The easiest way to get Flash is to use the "Ubuntu Software Center" and search for "restricted". Then install the Ubuntu
Restricted Extras. This includes Java, Flash and other fun stuff. 

To install the remaining dependencies, enter the following into a terminal window:

sudo apt-get php5
sudo apt-get apache2
sudo apt-get install libapache2-mod-php5
sudo apt-get graphviz
sudo /etc/init.d/apache2 restart


Step 2:

Download the most recent backup of the production/development site from the current host.  This is currently 
abstract.cs.washington.edu/~bdwalker.  The backups are kept in a folder called "backups" in the sites root
directory.  They will be time stamped so it will be easy to determine the most recent backup.  If you would like
to use the most current version of the site then go to abstract.cs.washington.edu/~bdwalker/publish.php and 
backup the desired site.  This will create a .zip file of the entire site contents.  Once completed you can then
download the most recent version.  

Once downloaded simply extract the contents and move them to the corresponding folder on your computer.  On Ubuntu
web files should be placed in /var/www. 

Step 3:

Download the appropriate JDK 7 binaries for your computer framework.  You will also need to download the Scala binaries 
from http://www.scala-lang.org/downloads. 

Once downloaded, they will both need to be placed in the parent directory of the website.  In Ubuntu
the JDK 7 framework and the Scala framework should be placed in the /var folder or in the parent folder
of where you placed the web files.  

You will need to manually adjust the paths in the shell script files and the globals.php file.  These 
are all located in the scripts folder in the website directory.  These should be updated to point
to the JDK 7 framework and the Scala framework in the parent directory. The globals.php file is located
in the scripts folder and the shell scripts are located in the scripts folder in a folder called typecheckers. 
You should only need to adjust the path for JDK 7 in the globals.php file and you should only need to update
the Scala path in the shell scripts. 

Permissions:

The uploads folder needs full write permissions, as does the scripts folder. The scripts folder will eventually
need only read and execute but that will require I change a few things.  All the other folders should have read
and execute. 


Step 4:

You should now be able to use the site.  Open a browser and enter localhost into the address bar and press Enter. 
You should now see the PipeJam homepage. 


Please let me know if any of this is unclear or didn't work for you so I can update as appropriate. 
bdwalker@cs.washington.edu


  